"use strict";(self.webpackChunkwebpages=self.webpackChunkwebpages||[]).push([[475],{1475:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(865),s=n.n(a),r=n(578),i=n(2641);let l={gamenameinputcontent:"",isgamenamesetfailed:!1,monthly_plan_duration:0,slots:[],no_security:!1,helpername:"",helpername_set_error:"",helperuserbtntitle:"",helperloaded:!1,helperRealnameUrl:"",helperCreated:!1,helperDefaultButtonWorking:!1,acceptWorldChat:!1,phoenix_otp:"",phoenix_otp_displayOrdered:!1,changePassword_working:!1,gamename_apply_btn_working:!1,changePassword_inputs:["","",""],binded_mail:null,email_bind_val:"",email_bind_captcha_val:"",email_bind_working:!1,bot_linkCode:"",bot_linkCode_displayOrdered:!1,is_commercial_2022:!1,is_2fa_enabled:!1,is_2fa_in_progress:!1,captchaRand:0,user_points:0,rate_limit_waiving_in_progress:!1,nemcbind_inputs:["",""],nemcbind_status:!1,oninit:async()=>{l.captchaRand=Math.random(),l.is_2fa_in_progress=!1;let e=await i.Z.FetchProfileGeneral();l.is_2fa_enabled=e.is_2fa,l.no_security=e.no_security,l.bot_linkCode=e.blc,l.gamenameinputcontent=e.cn_username,l.slots=e.slots,l.user_points=e.points||0,l.nemcbind_status=e.nemcbind_status,l.phoenix_otp=e.phoenix_otp,e.binded_mail?l.binded_mail=e.binded_mail:l.binded_mail=null,l.monthly_plan_duration=e.monthly_plan_duration,s().redraw();let t=await i.Z.GetHelperStatus();l.helpername=t.username,l.helperCreated=t.set,l.helperRealnameUrl=t.realname_addr||"",(t.realname_addr||l.helperCreated||l.helpername||!1===t.set)&&(l.helperloaded=!0),s().redraw()},view:e=>{let t=[];for(let e in l.slots){let n=parseInt(e),a=l.slots[e];a.walked||a.canchange||(a.locked?a.sid+="|固定slot，不可修改":a.sid+=`|${a.ato}天后方可修改`,a.walked=!0),t.push(s()("tr",s()("td",s()(r.ZP.doClassReplace("input.userProfile-form-input.form-input.ember-text-field.ember-view"),{value:l.slots[n].sid,disabled:!l.slots[n].canchange,oninput:e=>{l.slots[n].sid=e.target.value}})),s()("td",a.locked?"固定":"可变"),s()("td",a.canchange?s()(r.ZP.button,{disabled:l.slots[n].isProcessing,onclick:e=>{e.preventDefault(),l.slots[n].isProcessing=!0,(async()=>{if(!await r.ZP.question("提示",`您正将槽位内容更改为"${l.slots[n].sid}"`))return l.slots[n].isProcessing=!1,void s().redraw();let e=await i.Z.SaveSlot(l.slots[n].slotid,l.slots[n].sid,!1);if(!e.success)return await r.ZP.showAlert("错误","未能应用操作："+e.message),l.slots[n].isProcessing=!1,void s().redraw();l.slots=e.slots,s().redraw()})()}},"保存"):null,a.locked&&!a.canchange?s()(r.ZP.button,{disabled:l.slots[n].isProcessing,onclick:e=>{e.preventDefault(),l.slots[n].isProcessing=!0,r.ZP.question("警告","确定要删除这个槽位吗?",!0).then((async e=>{if(!e)return l.slots[n].isProcessing=!1,void s().redraw();await i.Z.SaveSlot(l.slots[n].slotid,"",!0),l.slots[n].isProcessing=!1,l.oninit()}))}},"删除"):null)))}return s()(r.ZP.frame,{pageName:"用户信息",pageIcon:'<svg class="sectionTitle-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 448 512"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"></path></svg>'},s()(r.ZP.section,{title:"游戏名"},l.isgamenamesetfailed?s()("p",{style:{color:"red"}},"设置失败"):null,s()(r.ZP.sectionGeneralText,"在此处设置客户端默认游戏名，可以不设置。"),s()(r.ZP.form,s()(r.ZP.formInput,{value:l.gamenameinputcontent,oninput:e=>{l.gamenameinputcontent=e.target.value}},"游戏名")),s()(r.ZP.button,{disabled:l.gamename_apply_btn_working,onclick:e=>{e.preventDefault(),l.gamename_apply_btn_working=!0,async function(){let e=await i.Z.SaveClientUsername(l.gamenameinputcontent);e.success?(l.gamename_apply_btn_working=!1,l.gamenameinputcontent=e.namearray[0],s().redraw()):(l.gamename_apply_btn_working=!1,l.isgamenamesetfailed=!0,s().redraw())}()}},"应用")),s()(r.ZP.section,{title:"Points"},s()("p","100 pts = 1 CNY"),s()("p",["剩余 Points: ",s()("b",{style:"color:blue;"},l.user_points.toString())]),s()(r.ZP.button,{onclick:()=>{window.open(`https://api.fastbuilder.pro/local/cgi/exchange_points?secret=${i.Z.GetAPISecret()}`)}},"兑换")),s()(r.ZP.section,{title:"月额 Plan"},l.is_commercial_2022?s()("p",{style:{color:"red"}},"由于您的账号是商业账号，在有效期过期后数日后将会被删除。"):null,s()("p",-1===l.monthly_plan_duration?"永久":`剩余 ${l.monthly_plan_duration} 天有效`)),s()(r.ZP.section,{title:"租赁服绑定"},s()(r.ZP.sectionGeneralText,"请在下方列表中设定您的常用租赁服，每个位置(slot)均在设置后1个月内不可变。您仅可以进入已在这里绑定的租赁服。"),s()(r.ZP.sectionGeneralText,"slot 可自商城购买。"),s()(r.ZP.form,s()("div.userProfile-form-item",s()("table",s()("tr",s()("th","服务器号"),s()("th","类型"),s()("th","操作")),t)))),s()(r.ZP.section,{title:"fbtoken"},s()(r.ZP.sectionGeneralText,"fbtoken 是 PhoenixBuilder 用于登入至您的 FastBuilder 用户中心账户的凭证。"),s()(r.ZP.sectionGeneralText,"点击下方按钮获取。"),s()(r.ZP.button,{onclick:e=>{location.href=i.Z.GetAPI("get_phoenix_token")}},"获取")),s()(r.ZP.section,{title:"辅助用户"},l.helperloaded?[s()({view:e=>0===l.helpername_set_error.length?null:s()("p",{style:{color:"red"}},l.helpername_set_error)}),s()(r.ZP.sectionGeneralText,["辅助用户是用于进入您的租赁服完成操作的",s()("b","机器人用户"),"。","辅助用户之创建是 PhoenixBuilder 正常工作的必要条件。","当您创建辅助用户后，可能需要刷新页面才可进行网易实名操作。"]),l.helperCreated&&0===l.helperRealnameUrl.length?s()(r.ZP.formInput,{value:l.helpername,oninput:e=>{l.helpername=e.target.value}},"辅助用户名称"):null,0===l.helperRealnameUrl.length?s()(r.ZP.button,{disabled:l.helperDefaultButtonWorking,onclick:e=>{e.preventDefault(),l.helpername_set_error="",l.helperDefaultButtonWorking=!0,async function(){let e=await i.Z.ChangeHelperNameOrCreateHelper(l.helpername);if(!e.success)return e.verify_url&&(await r.ZP.showAlert("网易验证码验证","本次操作需要完成网易验证码验证，点击 OK 后将跳转至验证页面。"),window.open(e.verify_url)),l.helpername_set_error=e.message,l.helperDefaultButtonWorking=!1,void s().redraw();if(l.helperDefaultButtonWorking=!1,e.need_realname){l.helperloaded=!1,s().redraw();let e=await i.Z.GetHelperStatus();l.helpername=e.username,l.helperCreated=e.set,l.helperRealnameUrl=e.realname_addr,l.helperloaded=!0}s().redraw()}()}},l.helperCreated?"更改昵称":"创建辅助用户"):s()(r.ZP.abutton,{href:l.helperRealnameUrl,target:"_blank"},"网易实名认证")]:s()("p","请稍候，正在加载")),l.no_security?null:s()(r.ZP.section,{title:"双重验证"},s()(r.ZP.sectionGeneralText,"双重验证可以防止未经授权的人登入你的账号。双重验证使用密码器生成的一次性密码。"),s()(r.ZP.button,{disabled:l.is_2fa_in_progress,onclick:()=>{l.is_2fa_enabled?(async()=>{if(!await r.ZP.question("关闭二重验证","确认关闭二重验证？",!0))return;l.is_2fa_in_progress=!0,s().redraw();let e=await i.Z.TurnOff2FA();l.is_2fa_in_progress=!1,e.success?(l.is_2fa_enabled=!1,s().redraw()):s().redraw()})():(l.is_2fa_in_progress=!0,(async()=>{let e=await i.Z.Kickstart2FA();if(l.is_2fa_in_progress=!1,!e.success)return r.ZP.showAlert("错误",e.message);let t=await r.ZP.getInput("启用双重验证",[s()("p","请使用 Google Authenticator (或任意密码器) 扫描以下二维码"),s()("div",s()("img",{src:e.qrcode})),s()("p","或者输入这段文字:"),s()("p",s()("b",e.plainkey)),s()("p","完成后，你会看到对应验证码，请将其输入到下方文本框内。")],"验证码",!1,!1);if(!1===t)return;l.is_2fa_in_progress=!0,s().redraw();let n=await i.Z.FinishRegistering2FA(t);if(l.is_2fa_in_progress=!1,!n.success)return r.ZP.showAlert("错误",n.message);l.is_2fa_enabled=!0,await r.ZP.showAlert("成功","您再次登录时将被要求输入验证码。")})())}},l.is_2fa_enabled?"禁用":"启用")),s()(r.ZP.section,{title:"密码"},s()(r.ZP.sectionGeneralText,"更改用户中心的登录密码。"),s()(r.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[0],oninput:e=>{l.changePassword_inputs[0]=e.target.value}},"原密码"),s()(r.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[1],oninput:e=>{l.changePassword_inputs[1]=e.target.value}},"新密码"),s()(r.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[2],oninput:e=>{l.changePassword_inputs[2]=e.target.value}},"确认新密码"),s()(r.ZP.button,{disabled:l.changePassword_working,onclick:e=>{if(e.preventDefault(),l.changePassword_inputs[1]!==l.changePassword_inputs[2])return r.ZP.showAlert("错误","新密码两次输入不一致。");l.changePassword_working=!0,async function(){let e=await i.Z.ChangePassword(l.changePassword_inputs[0],l.changePassword_inputs[1]);if(!e.success)return r.ZP.showAlert("错误",e.message),l.changePassword_working=!1,void s().redraw();l.changePassword_working=!1,s().route.set("/login"),s().redraw()}()}},"更改")),l.no_security?null:s()(r.ZP.section,{title:"PhoenixBuilder 一次性密码"},s()(r.ZP.sectionGeneralText,"这是你用于登录 PhoenixBuilder 的一次性密码，你不能使用用户中心密码登录 PhoenixBuilder 。"),s()(r.ZP.sectionGeneralText,"Token 登录不受此影响。"),s()("p",l.phoenix_otp_displayOrdered?l.phoenix_otp:"***"),s()(r.ZP.button,{onclick:e=>{l.phoenix_otp_displayOrdered=!l.phoenix_otp_displayOrdered}},l.phoenix_otp_displayOrdered?"隐藏密码":"显示密码")),s()(r.ZP.section,{title:"机器人链接口令"},s()(r.ZP.sectionGeneralText,"您可以使用以下链接口令来链接此账号到机器人。请注意：这将给予其对您账号完整的控制权！"),s()("p",l.bot_linkCode_displayOrdered?l.bot_linkCode:s()("b","***")),s()(r.ZP.button,{onclick:e=>{l.bot_linkCode_displayOrdered=!l.bot_linkCode_displayOrdered}},l.bot_linkCode_displayOrdered?"隐藏链接口令":"显示链接口令")),s()(r.ZP.section,{title:"导出账号信息"},s()(r.ZP.sectionGeneralText,"点击下方按钮以导出我们服务器上所有与你有关的信息，这可能要花费数秒时间。"),s()(r.ZP.button,{onclick:()=>{window.open(`https://api.fastbuilder.pro/local/cgi/export_user_data?secret=${i.Z.GetAPISecret()}`)}},"导出")),s()(r.ZP.section,{title:"付款记录"},s()(r.ZP.button,{onclick:e=>{e.preventDefault(),s().route.set("/my-payment-log")}},"查询付款记录")),l.no_security?null:s()(r.ZP.section,{title:"放弃安全措施"},s()(r.ZP.sectionGeneralText,"你拥有放弃用户中心一切安全措施的权利。此操作不可撤回。"),s()(r.ZP.button,{onclick:async()=>{await i.Z.AbandonSecurityMeasures(),l.oninit()}},"放弃")))}};const o=l}}]);